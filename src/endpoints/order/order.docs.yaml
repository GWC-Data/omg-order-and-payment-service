/orders:
  post:
    summary: Create order
    operationId: createOrder
    tags:
      - Orders
    security:
      - bearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            required:
              - userId
              - templeId
              - orderType
            properties:
              userId: { type: string, format: uuid }
              templeId: { type: string, format: uuid }
              addressId: { type: string, format: uuid }
              orderType:
                type: string
                enum: [darshan, puja, prasad, product]
              status:
                type: string
                enum: [pending, confirmed, processing, ready, shipped, completed, cancelled, refunded]
              scheduledDate: { type: string, format: date }
              scheduledTimestamp: { type: string, format: date-time }
              fulfillmentType:
                type: string
                enum: [pickup, delivery, in_person, digital]
              subtotal: { type: number }
              discountAmount: { type: number }
              convenienceFee: { type: number }
              taxAmount: { type: number }
              totalAmount: { type: number }
              currency: { type: string }
              paymentStatus:
                type: string
                enum: [pending, paid, failed, refunded]
              paymentMethod: { type: string }
              paymentId: { type: string, format: uuid }
              paidAt: { type: string, format: date-time }
              trackingNumber: { type: string }
              carrier: { type: string }
              shippedAt: { type: string, format: date-time }
              deliveredAt: { type: string, format: date-time }
              contactName: { type: string }
              contactPhone: { type: string }
              contactEmail: { type: string }
              cancelledAt: { type: string, format: date-time }
              cancellationReason: { type: string }
              refundAmount: { type: number }
              shippingAddress:
                type: string
                description: Full shipping address (address, city, state, country combined)
              deliveryType:
                type: string
                enum: [standard, express]
                description: Delivery speed type
    responses:
      '201':
        description: Order created successfully
      '401':
        description: Unauthorized
      '500':
        description: Server error

  get:
    summary: Get all orders
    operationId: getAllOrders
    tags:
      - Orders
    security:
      - bearerAuth: []
    parameters:
      - name: page
        in: query
        required: false
        schema: { type: integer, minimum: 1, default: 1 }
      - name: limit
        in: query
        required: false
        schema: { type: integer, minimum: 1, maximum: 100, default: 20 }
      - name: userId
        in: query
        required: false
        schema: { type: string, format: uuid }
      - name: templeId
        in: query
        required: false
        schema: { type: string, format: uuid }
      - name: status
        in: query
        required: false
        schema:
          type: string
          enum: [pending, confirmed, processing, ready, shipped, completed, cancelled, refunded]
      - name: orderType
        in: query
        required: false
        schema:
          type: string
          enum: [darshan, puja, prasad, product]
      - name: paymentStatus
        in: query
        required: false
        schema:
          type: string
          enum: [pending, paid, failed, refunded]
      - name: startDate
        in: query
        required: false
        schema: { type: string, format: date }
      - name: endDate
        in: query
        required: false
        schema: { type: string, format: date }
    responses:
      '200':
        description: Orders fetched successfully
      '401':
        description: Unauthorized
      '500':
        description: Server error

/orders/{id}:
  get:
    summary: Get order by id
    operationId: getOrderById
    tags:
      - Orders
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    responses:
      '200':
        description: Order fetched successfully
      '404':
        description: Order not found
      '401':
        description: Unauthorized
      '500':
        description: Server error

/orders/{orderId}/details:
  get:
    summary: Get order details (order + items + status history)
    operationId: getOrderDetails
    tags:
      - Orders
    security:
      - bearerAuth: []
    parameters:
      - name: orderId
        in: path
        required: true
        schema: { type: string, format: uuid }
    responses:
      '200':
        description: Order details fetched successfully
      '404':
        description: Order not found
      '500':
        description: Server error

  put:
    summary: Update order
    operationId: updateOrder
    tags:
      - Orders
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              userId: { type: string, format: uuid }
              templeId: { type: string, format: uuid }
              addressId: { type: string, format: uuid }
              orderType:
                type: string
                enum: [darshan, puja, prasad, product]
              status:
                type: string
                enum: [pending, confirmed, processing, ready, shipped, completed, cancelled, refunded]
              scheduledDate: { type: string, format: date }
              scheduledTimestamp: { type: string, format: date-time }
              fulfillmentType:
                type: string
                enum: [pickup, delivery, in_person, digital]
              subtotal: { type: number }
              discountAmount: { type: number }
              convenienceFee: { type: number }
              taxAmount: { type: number }
              totalAmount: { type: number }
              currency: { type: string }
              paymentStatus:
                type: string
                enum: [pending, paid, failed, refunded]
              paymentMethod: { type: string }
              paymentId: { type: string, format: uuid }
              paidAt: { type: string, format: date-time }
              trackingNumber: { type: string }
              carrier: { type: string }
              shippedAt: { type: string, format: date-time }
              deliveredAt: { type: string, format: date-time }
              contactName: { type: string }
              contactPhone: { type: string }
              contactEmail: { type: string }
              cancelledAt: { type: string, format: date-time }
              cancellationReason: { type: string }
              refundAmount: { type: number }
              shippingAddress:
                type: string
                description: Full shipping address (address, city, state, country combined)
              deliveryType:
                type: string
                enum: [standard, express]
                description: Delivery speed type
    responses:
      '200':
        description: Order updated successfully
      '404':
        description: Order not found
      '401':
        description: Unauthorized
      '500':
        description: Server error

  delete:
    summary: Delete order
    operationId: deleteOrder
    tags:
      - Orders
    security:
      - bearerAuth: []
    parameters:
      - name: id
        in: path
        required: true
        schema: { type: string, format: uuid }
    responses:
      '200':
        description: Order deleted successfully
      '404':
        description: Order not found
      '401':
        description: Unauthorized
      '500':
        description: Server error


